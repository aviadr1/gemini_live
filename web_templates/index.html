<!DOCTYPE html>
<html>
<head>
    <title>Gemini Live API</title>
    <script type="text/javascript" src="/eel.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>üéôÔ∏è Gemini Live API</h1>

        <div class="status-bar">
            <span id="status">Disconnected</span>
        </div>

        <div class="controls">
            <div class="control-row">
                <div class="control-group">
                    <label>System Prompt:</label>
                    <select id="system-prompt-select">
                        <option value="">None (Default)</option>
                        <option value="video_describer">Video Describer for Accessibility</option>
                        <option value="expression_analyzer">Facial Expression Analyzer</option>
                        <option value="yoga_instructor">Supportive Yoga Instructor</option>
                        <option value="custom">‚úèÔ∏è Custom Prompt</option>
                    </select>
                </div>
            </div>

            <!-- System Instruction Display -->
            <div id="system-instruction-display" class="prompt-display" style="display: none;">
                <label>System Instruction:</label>
                <div class="prompt-text" id="system-instruction-text"></div>
            </div>

            <!-- Narration Prompts Display -->
            <div id="narration-prompts-display" class="prompt-display" style="display: none;">
                <label>Narration Prompts (will cycle through these):</label>
                <ul id="narration-prompts-list" class="prompt-list"></ul>
            </div>

            <!-- Custom Prompt Inputs -->
            <div id="custom-prompt-section" style="display: none;">
                <div class="control-group">
                    <label>Custom System Instruction:</label>
                    <textarea id="custom-system-instruction" rows="6" placeholder="Enter your custom system instruction here..."></textarea>
                </div>
                <div class="control-group">
                    <label>Custom Narration Prompts (one per line):</label>
                    <textarea id="custom-narration-prompts" rows="4" placeholder="What do you see?&#10;Describe the current activity.&#10;Provide feedback."></textarea>
                </div>
            </div>

            <div class="control-row">
                <div class="control-group">
                    <label>Video Mode:</label>
                    <select id="video-mode">
                        <option value="camera">üìπ Camera</option>
                        <option value="screen">üñ•Ô∏è Screen Share</option>
                        <option value="none">üîä Audio Only</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>Frame Rate: <span id="fps-value">1.0</span> FPS</label>
                    <input type="range" id="fps-slider" min="0.5" max="5" step="0.5" value="1.0">
                    <span class="help-text">Higher = more responsive, but uses more bandwidth & API quota</span>
                </div>
            </div>

            <div class="control-row">
                <div class="control-group checkbox-group">
                    <label>
                        <input type="checkbox" id="narration-mode">
                        <span>üé¨ Video Narration Mode</span>
                    </label>
                    <span class="help-text">AI provides continuous commentary on video (great for fitness, cooking, tutorials)</span>
                </div>

                <div class="control-group" id="narration-interval-group" style="display: none;">
                    <label>Feedback Interval: <span id="interval-value">5</span>s</label>
                    <input type="range" id="interval-slider" min="3" max="15" step="1" value="5">
                </div>
            </div>

            <div class="button-row">
                <button id="start-btn" onclick="startSession()" class="primary-btn">‚ñ∂Ô∏è Start Session</button>
                <button id="stop-btn" onclick="stopSession()" disabled class="danger-btn">‚èπÔ∏è Stop Session</button>
            </div>
        </div>

        <div class="transcript-container">
            <h2>Conversation</h2>
            <div id="transcript" class="transcript"></div>
        </div>

        <div class="input-container">
            <input type="text" id="message-input" placeholder="Type a message..." disabled>
            <button onclick="sendMessage()" id="send-btn" disabled>Send</button>
        </div>

        <div class="info">
            <p><strong>üí° Tips:</strong></p>
            <ul>
                <li><strong>Use headphones</strong> to prevent echo and feedback</li>
                <li><strong>Frame Rate:</strong> 1 FPS is usually sufficient. Increase for fast-moving content</li>
                <li><strong>Narration Mode:</strong> Perfect for real-time feedback on exercises, cooking, or demonstrations</li>
                <li><strong>Audio Quality:</strong> Speak clearly and pause briefly for the AI to respond naturally</li>
            </ul>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>